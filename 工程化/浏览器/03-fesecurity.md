---
title: 前端安全
date: 2021-02-20 11:10:34
permalink: /工程化/浏览器/fesecurity
categories:
  - 浏览器
tags:
  - 安全
  - 浏览器
---
# 前端安全相关

## XSS攻击：跨站脚本攻击

### 原理：

Xss(cross-site scripting)攻击指的是攻击者往Web页面里插入恶意 html标签或者javascript代码（特点：注入代码）。

比如数据提交、input输入、评论中插入了html、含有js代码的script标签，没有将用户输入的文本进行合适的过滤，就贸然插入到 HTML中，这很容易造成注入漏洞。

将一些隐私数据像 cookie、session 发送给攻击者，将受害者重定向到一个由攻击者控制的网站，在受害者的机器上进行一些恶意操作。

比如：攻击者在论坛中放一个看似安全的链接，骗取用户点击后，窃取cookie中的用户私密信息；
或者攻击者在论坛中加一个恶意表单，当用户提交表单的时候，却把信息传送到攻击者的服务器中，而不是用户原本以为的信任站点。

### xss防范：

1. 输入过滤，前后端都需要过滤：首先代码里对用户输入的地方和变量都需要仔细检查长度和对”<”,”>”,”;”,”’”等字符做过滤；
2. 对cookie 进行操作，可以在Set-Cookie 末尾加上HttpOnly 来防止javascript 代码直接获取cookie。
3. 尽量采用POST 而非GET 提交表单
4. 转义 HTML 标签
5. 数字和图形验证码：防止脚本机器 冒充用户提交危险操作。

## CSRF：跨站请求伪造

CSRF的特点是冒充，在通常情况下，CSRF 攻击是攻击者借助受害者的 Cookie 骗取服务器的信任，可以在受害者毫不知情的情况下以受害者名义伪造请求发送给受攻击服务器，从而在并未授权的情况下执行在权限保护之下的操作。

受害者进入a网站，点击了另外一个恶意的b网站的链接，攻击者获取 该用户的登录凭证，
绕过后台的用户验证，达冒充用户对a网站进行恶意的攻击。

常见：图片URL、超链接

### CSRF防范

1. 阻止恶意链接的访问，当前用户打开其他用户填写的链接时，需告知风险。比如微信，之前不允许访问 外部的网站。
2. 对于用户上传的图片，进行转存或者校验。不要直接使用用户填写的图片链接。
3. 同源检测的方法，服务器根据 http 请求头中 origin 或者 referer 信息来判断请求是否为允许访问的站点，从而对请求进行过滤。
4. 添加 token令牌 验证。
5. 双重cookie 验证。
6. 设置 cookie 属性的时候设置 Samesite ，限制 cookie 不能作为被第三方使用。
